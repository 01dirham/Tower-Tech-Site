const i18n = {
  pl:{brand:"Tower Tech",
      nav_general:"Ogólne", nav_gallery:"Galeria", nav_forms:"Zgłoszenia", nav_certs:"Certyfikaty", nav_contacts:"Kontakt",
      hero_title:"Tower Tech", hero_sub:"School and Work",
      about_text:"TowerTech to firma z dużym doświadczeniem w branży, oferująca kompleksowe kursy dla przyszłych operatorów żurawi. Kandydat otrzymuje solidną teorię oraz praktykę na nowoczesnych żurawiach. Standardowy czas trwania kursu to 4–6 tygodni. Pełny kurs obejmuje: teorię, praktykę i egzamin. Cena — 4200 zł.",
      req_title:"Wymagania", req_list:"<li>Punktualność</li><li>Odpowiedzialność</li><li>Znajomość języka polskiego</li><li>Odporność na stres</li>",
      apply_training_title:"Zgłoszenie na szkolenie",
      learn_h3:"Formularz: szkolenie",
      name:"Imię i nazwisko", phone:"Telefon / WhatsApp", email:"Email", city:"Miasto",
      polish_level:"Poziom języka polskiego",
      comment:"Komentarz", submit:"Złóż zgłoszenie",
      post_course_text:"Po ukończeniu kursu możemy pomóc w zatrudnieniu — warunki ustalamy indywidualnie. Dokumenty wydane po zdanym egzaminie są ważne na terenie całej UE.",
      gallery_h2:"Galeria",
      work_invite:"<strong>Tower Tech</strong> zaprasza operatorów z doświadczeniem. Wypełnij zgłoszenie — skontaktujemy się z propozycją dopasowaną do Twoich oczekiwań.",
      work_h3:"Formularz: praca",
      experience:"Doświadczenie na żurawiu wieżowym",
      udt:"Certyfikat/UDT", cranes_q:"Na jakich żurawiach masz doświadczenie?",
      certs_h2:"Certyfikaty", cert_title:"Certyfikat Tower Tech",
      contacts_h2:"Kontakt",
      contacts_text:"NIP: 6482823334<br>ul. Górnoslaska 6/2<br>41-800 Zabrze<br>Tel: <a href='tel:+48796390322'>+48 796 390 322</a>",
      consent_text:"I agree to the processing of my personal data for contact purposes.",
      consent_text:"Wyrażam zgodę na przetwarzanie moich danych osobowych w celu kontaktu.",
      level_a1:"A1", level_a2:"A2", level_b1:"B1", level_b2:"B2", level_c1:"C1", level_c2:"C2",
      exp_1:"Do 1 roku", exp_1_3:"2–3 lata", exp_3p:"Powyżej 3 lat"
  },
  en:{brand:"Tower Tech",
      nav_general:"Overview", nav_gallery:"Gallery", nav_forms:"Applications", nav_certs:"Certificates", nav_contacts:"Contacts",
      hero_title:"Tower Tech", hero_sub:"School and Work",
      about_text:"TowerTech is an experienced provider of comprehensive courses for future tower-crane operators. You get solid theory and hands‑on practice on modern cranes. Typical duration: 4–6 weeks. Full package includes theory, practice and exam. Price — 4200 PLN.",
      req_title:"Requirements", req_list:"<li>Punctuality</li><li>Responsibility</li><li>Polish language knowledge</li><li>Stress resilience</li>",
      apply_training_title:"Apply for training",
      learn_h3:"Form: training",
      name:"Full name", phone:"Phone / WhatsApp", email:"Email", city:"City",
      polish_level:"Polish level",
      comment:"Comment", submit:"Submit",
      post_course_text:"After the course we can assist with job placement — discussed individually. Documents are valid across the EU.",
      gallery_h2:"Gallery",
      work_invite:"<strong>Tower Tech</strong> welcomes experienced operators. Submit an application and we will get back with a matching offer.",
      work_h3:"Form: employment",
      experience:"Tower crane experience",
      udt:"Certificate/UDT", cranes_q:"Which cranes have you worked on?",
      certs_h2:"Certificates", cert_title:"Tower Tech Certificate",
      contacts_h2:"Contacts",
      contacts_text:"NIP: 6482823334<br>ul. Górnoslaska 6/2<br>41-800 Zabrze<br>Tel: <a href='tel:+48796390322'>+48 796 390 322</a>",
      consent_text:"I agree to the processing of my personal data for contact purposes.",
      consent_text:"Wyrażam zgodę na przetwarzanie moich danych osobowych w celu kontaktu.",
      level_a1:"A1", level_a2:"A2", level_b1:"B1", level_b2:"B2", level_c1:"C1", level_c2:"C2",
      exp_1:"Up to 1 year", exp_1_3:"2–3 years", exp_3p:"More than 3 years"
  },
  uk:{brand:"Tower Tech",
      nav_general:"Загальне", nav_gallery:"Галерея", nav_forms:"Заявки", nav_certs:"Сертифікати", nav_contacts:"Контакти",
      hero_title:"Tower Tech", hero_sub:"School and Work",
      about_text:"TowerTech — досвідчений провайдер комплексних курсів для майбутніх операторів баштових кранів. Сильна теорія та практика на сучасних кранах. Тривалість: 4–6 тижнів. Повний пакет: теорія, практика, іспит. Вартість — 4200 zł.",
      req_title:"Вимоги", req_list:"<li>Пунктуальність</li><li>Відповідальність</li><li>Знання польської мови</li><li>Стресостійкість</li>",
      apply_training_title:"Подати заявку на навчання",
      learn_h3:"Анкета: навчання",
      name:"Ім’я та прізвище", phone:"Телефон / WhatsApp", email:"Email", city:"Місто",
      polish_level:"Рівень польської",
      comment:"Коментар", submit:"Надіслати",
      post_course_text:"Після курсу можемо допомогти з працевлаштуванням — умови обговорюємо індивідуально. Документи дійсні по всьому ЄС.",
      gallery_h2:"Галерея",
      work_invite:"<strong>Tower Tech</strong> запрошує операторів з досвідом. Заповніть заявку — повернемося з відповідною пропозицією.",
      work_h3:"Анкета: працевлаштування",
      experience:"Досвід на баштовому крані",
      udt:"Сертифікат/UDT", cranes_q:"На яких кранах маєте досвід?",
      certs_h2:"Сертифікати", cert_title:"Сертифікат Tower Tech",
      contacts_h2:"Контакти",
      contacts_text:"NIP: 6482823334<br>ul. Górnoslaska 6/2<br>41-800 Zabrze<br>Тел: <a href='tel:+48796390322'>+48 796 390 322</a>",
      consent_text:"Я погоджуюсь на обробку моїх персональних даних з метою контакту.",
      level_a1:"A1", level_a2:"A2", level_b1:"B1", level_b2:"B2", level_c1:"C1", level_c2:"C2",
      exp_1:"До 1 року", exp_1_3:"2–3 роки", exp_3p:"Понад 3 роки"
  }
};

function setLang(l){
  const t=i18n[l]||i18n.pl;
  document.querySelectorAll('[data-i]').forEach(el=>{
    const k=el.getAttribute('data-i');
    if(t[k]) el.textContent = t[k];
  });
  document.querySelectorAll('[data-md]').forEach(el=>{
    const k=el.getAttribute('data-md');
    if(t[k]) el.innerHTML = t[k];
  });
  // Polish level and experience selects
  document.querySelectorAll('select[data-i="polish_level"]').forEach(sel=>{
    const levels=[t.level_a1,t.level_a2,t.level_b1,t.level_b2,t.level_c1,t.level_c2].filter(Boolean);
    sel.innerHTML = levels.map(v=>`<option>${v}</option>`).join('');
  });
  document.querySelectorAll('select[data-i="experience"]').forEach(sel=>{
    const opts=[t.exp_1,t.exp_1_3,t.exp_3p].filter(Boolean);
    sel.innerHTML = opts.map(v=>`<option>${v}</option>`).join('');
  });
  // Active chip
  const bar=document.querySelector('.lang.mini');
  if(bar){
    bar.querySelectorAll('button').forEach(b=>{
      const on=b.dataset.lang===l;
      b.classList.toggle('active', on);
      b.setAttribute('aria-selected', on?'true':'false');
    });
  }
  localStorage.setItem('tt_lang', l);
}

(function(){
  const bar=document.querySelector('.lang.mini');
  if(bar){
    bar.addEventListener('click', e=>{
      const btn=e.target.closest('button[data-lang]'); if(!btn) return;
      setLang(btn.dataset.lang);
    });
  }
  const saved=localStorage.getItem('tt_lang')||'pl';
  setLang(saved);
})();